---
title: "具体的なウェイトのとり方"
post_id: "3090"
date: "2003-12-09T17:27:00+09:00"
draft: false
---


ウェイトの仕方にもよるけど、大抵 DirectX とか使う羽目になります。 正確に同じウェイトを刻むとすると、DOS では(相当外道な方法を使わない限り)無理ですね。 一応簡単なウェイトの取り方を幾つか調べて列挙してみました。
## forループによる空回り
たとえばこんなやつ。

```C
for(int i=0;i<10000;i++);
```

一番お手軽だけど、遅い PC と早い PC でウェイトの量に差がついてしまうし、コンパイラの最適化によって丸々消される可能性もあるので、これは使い物にならない。
## `time()` 関数を使う
時刻を常に監視して、時刻が変わらない間延々とループし続ける方法。DOS でも確実にどの PC でも同じ時間だけ正確なウェイトが刻めるが、1 秒未満のウェイトを取ることが出来ない。(最低でも1秒)
## `Sleep()` 関数を使う
Windows のタイマーを使ってミリ秒単位でプログラム(スレッド)を眠らせる。一見 1 ミリ秒単位で止めることが出来て理想かもしれないが、このタイマーは思ったより正確ではなく、最大 50 ミリ秒近いズレが生じる上、DOS では動かない。 とりあえずお手軽にできるウェイトの取り方といったらこの程度かな
